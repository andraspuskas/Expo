(this.webpackJsonp=this.webpackJsonp||[]).push([[0],{134:function(e,t,n){e.exports=n.p+"static/media/backIcon.7321fa2c.png"},213:function(e,t,n){e.exports=n.p+"static/media/addIcon.a2ecde8c.png"},276:function(e,t,n){e.exports=n.p+"static/media/AppIcon.5421c38f.png"},327:function(e,t,n){"use strict";var a=n(10),o=n.n(a),r=n(4),i=n.n(r),s=n(5),c=n.n(s),l=n(6),u=n.n(l),d=n(9),m=n.n(d),f=n(2),h=n.n(f),g=n(15),p=n(3),y=n(7),v=n(61),b=n(20),C=n(27),w=n(12),E=n(31),R=n(328),x=n(545),k=n(0),S=n.n(k),P=n(38),M=new(function(){function e(){var t=this;i()(this,e),this.state={data:null,allMessage:[]},this.init=function(){P.apps.length||P.initializeApp({apiKey:"AIzaSyCmX4C7tBPwZQDh8l734MBtUDKWOdEiO18",authDomain:"playlistapp-f6363.firebaseapp.com",databaseURL:"https://playlistapp-f6363-default-rtdb.firebaseio.com",projectId:"playlistapp-f6363",storageBucket:"playlistapp-f6363.appspot.com",messagingSenderId:"427902199737",appId:"1:427902199737:web:52985fe337d03caa2af868"})},this.checkAuth=function(){P.auth().onAuthStateChanged((function(e){e||console.log("No user")}))},this.send=function(e){e.forEach((function(e){var n={name:e.name,accessLevel:e.accessLevel,roomCode:e.roomCode,uid:e.uid};t.userRoomDb.push(n)}))},this.sendUpdateList=function(e,t){var n=[];e.forEach((function(e){var t={link:e.key,order:e.order,title:e.label};n.push(t)})),P.database().ref("playlist/"+t).set(n).then((function(){return console.log("Data set.")}))},this.parse=function(e){var t=e.val(),n=t.accessLevel,a=t.roomCode,o=t.uid,r=t.name;e.key;return{name:r,accessLevel:n,roomCode:a,uid:o}},this.parseList=function(e){var t=e.val();t.link,t.order,t.title,e.key;return e},this.get=function(e){t.userRoomDb.on("child_added",(function(n){return e(t.parse(n))}))},this.getList=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";P.database().ref("playlist/"+n).on("child_added",(function(n){return e(t.parseList(n))})),P.database().ref("playlist/"+n).on("child_removed",(function(n){return e(t.parseList(n))})),P.database().ref("playlist/"+n).on("child_changed",(function(n){return e(t.parseList(n))})),P.database().ref("playlist/"+n).on("child_moved",(function(n){return e(t.parseList(n))}))},this.init()}return c()(e,[{key:"off",value:function(){this.userRoomDb.off()}},{key:"userRoomDb",get:function(){return P.database().ref("userRoom")}},{key:"rootDb",get:function(){return P.database().ref("")}},{key:"roomDb",get:function(){return P.database().ref("room")}},{key:"playlistRoomDb",get:function(){return P.database().ref("playlistRoom")}},{key:"databaseAlone",get:function(){return P.database()}},{key:"uid",get:function(){return(P.auth().currentUser||{}).uid}},{key:"email",get:function(){return(P.auth().currentUser||{}).email}},{key:"auth",get:function(){return P.auth()}}]),e}()),I=n(47);function T(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=h()(e);if(t){var o=h()(this).constructor;n=Reflect.construct(a,arguments,o)}else n=a.apply(this,arguments);return m()(this,n)}}var L=function(e){u()(a,e);var t=T(a);function a(){var e;i()(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={hasCameraPermission:null,scanned:!1,messages:null,userId:""},e.getPermissionsAsync=function(){var t,n;return o.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,o.a.awrap(x.b(x.a));case 2:t=a.sent,n=t.status,e.setState({hasCameraPermission:"granted"===n});case 5:case"end":return a.stop()}}),null,null,null,Promise)},e.getRoomNameByCode=function(t){for(var n in e.state.messages)if(e.state.messages[n].roomCode===t)return e.state.messages[n].name},e.onBackPress=function(){e.props.navigation.navigate("RoomList")},e.handleBarCodeScanned=function(t){t.type;var n=t.data;e.setState({scanned:!0}),M.send([{name:e.getRoomNameByCode(n),roomCode:n,uid:e.state.userId,accessLevel:"Editor"}]),e.props.navigation.navigate("Main",{roomCode:{data:n},roomName:e.getRoomNameByCode(n),uid:e.state.userId})},e}return c()(a,[{key:"componentDidMount",value:function(){var e=this;return o.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,o.a.awrap(this.getPermissionsAsync());case 2:return t.next=4,o.a.awrap(M.userRoomDb.once("value",(function(t){var n=t.toJSON(),a=[];for(var o in n)a.push(n[o]);e.setState({messages:a}),e.setState({userId:M.uid})})));case 4:case"end":return t.stop()}}),null,this,null,Promise)}},{key:"render",value:function(){var e=this,t=this.state,a=t.hasCameraPermission,o=t.scanned;return null===a?k.createElement(g.a,null,"Requesting for camera permission"):!1===a?k.createElement(g.a,null,"No access to camera"):k.createElement(p.a,{style:{flex:1,paddingTop:"android"===w.a.OS?E.a.currentHeight:0,backgroundColor:"#8ecfe8"}},k.createElement(p.a,{style:B.headerRow},k.createElement(p.a,{style:B.left},k.createElement(p.a,{style:{flexDirection:"row",alignItems:"center"}},k.createElement(b.a,{style:{marginRight:10},onPress:this.onBackPress},k.createElement(C.a,{style:B.backIcon,source:n(134)})),k.createElement(g.a,{style:B.backButtonText},"Scan QR Code To Join"))),k.createElement(p.a,{style:B.right},k.createElement(p.a,{style:B.addIcon}))),k.createElement(p.a,{style:{height:"100%",flexDirection:"column",justifyContent:"flex-end"}},k.createElement(R.a,{onBarCodeScanned:o?void 0:this.handleBarCodeScanned,style:[y.a.absoluteFillObject,{width:"100%"}]}),o&&k.createElement(v.a,{title:"Tap to Scan Again",onPress:function(){return e.setState({scanned:!1})}})))}}]),a}(k.Component),B=y.a.create({container:{width:"100%",flex:1,paddingTop:"android"===w.a.OS?E.a.currentHeight:0},container2:{width:"100%"},scroll:{height:"83%"},addIcon:{height:40,width:40},backIcon:{height:22.73,width:30},headerRow:{flexDirection:"row",width:"100%",justifyContent:"center",paddingBottom:10,paddingTop:10,backgroundColor:"#8ecfe8"},right:{justifyContent:"center",width:"50%",alignItems:"flex-end",paddingRight:10},left:{justifyContent:"center",width:"50%",alignItems:"flex-start",paddingLeft:10},button:{padding:8,marginTop:3,marginBottom:3,height:40,width:150,borderRadius:6,backgroundColor:"#8ecfe8",alignItems:"center"},buttonCon:{},buttonText:{color:"white"},backButton:{},backButtonText:{color:"white"}});function A(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=h()(e);if(t){var o=h()(this).constructor;n=Reflect.construct(a,arguments,o)}else n=a.apply(this,arguments);return m()(this,n)}}var D=function(e){u()(n,e);var t=A(n);function n(){var e;i()(this,n);for(var a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return(e=t.call.apply(t,[this].concat(o)))._menu=null,e.setMenuRef=function(t){e._menu=t},e.hideMenu=function(){e._menu.hide()},e.showMenu=function(){e._menu.show()},e}return c()(n,[{key:"render",value:function(){return S.a.createElement(p.a,{style:{flex:1,alignItems:"center",justifyContent:"center"}},S.a.createElement(g.a,null,"Sz\xf6veg Sz\xf6veg Sz\xf6veg Sz\xf6veg Sz\xf6veg"),S.a.createElement(I.c,{ref:this.setMenuRef,button:S.a.createElement(g.a,{onPress:this.showMenu},"Show menu")},S.a.createElement(I.b,{onPress:this.hideMenu},"Menu item 1"),S.a.createElement(I.b,{onPress:this.hideMenu},"Menu item 2"),S.a.createElement(I.b,{onPress:this.hideMenu,disabled:!0},"Menu item 3"),S.a.createElement(I.a,null),S.a.createElement(I.b,{onPress:this.hideMenu},"Menu item 4")),S.a.createElement(g.a,null,"Sz\xf6veg Sz\xf6veg Sz\xf6veg Sz\xf6veg Sz\xf6veg"))}}]),n}(S.a.PureComponent),j=n(49),N=n(44),O=(y.a.create({container:{paddingTop:"android"===w.a.OS?E.a.height:0},TextContainer:{height:50,width:"98%",borderWidth:1,borderRadius:10,marginTop:1,marginBottom:1,marginLeft:3,marginRight:4,justifyContent:"center",paddingLeft:20,alignItems:"flex-start"},text:{fontFamily:"sans-serif",fontWeight:"bold",textShadowRadius:5},textCont:{alignItems:"flex-start"}}),n(26)),W=n(34),z=n(95);function J(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=h()(e);if(t){var o=h()(this).constructor;n=Reflect.construct(a,arguments,o)}else n=a.apply(this,arguments);return m()(this,n)}}var U=O.a.get("window"),_=function(e){u()(n,e);var t=J(n);function n(e){var a;return i()(this,n),(a=t.call(this,e)).showAddModal=function(){a.refs.myModal.open()},a.generateRoomCode=function(){for(var e="",t="ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789",n=t.length;!a.props.parentFlatList.isUnique(e);){e="";for(var o=0;o<6;o++)e+=t.charAt(Math.floor(Math.random()*n));console.log(e)}return e},a.onCreateButtonPress=function(){if(0!==a.state.newRoomName.length){var e={name:a.state.newRoomName,roomCode:a.generateRoomCode(),uid:a.props.parentFlatList.state.uid,accessLevel:"Owner"};a.props.parentFlatList.createRoom(e),a.refs.myModal.close()}else alert("You must enter room name")},a.onCloseButtonPress=function(){a.refs.myModal.close()},a.state={newRoomName:""},a}return c()(n,[{key:"render",value:function(){var e=this;return S.a.createElement(z.a,{style:F.modalContainer,position:"center",backdrop:!0,ref:"myModal",onClose:function(){alert("Modal Closed")}},S.a.createElement(g.a,{style:F.text},"Create New Room"),S.a.createElement(W.a,{style:F.textInput,placeholder:"Enter new room name",value:this.state.newRoomName,onChangeText:function(t){return e.setState({newRoomName:t})}}),S.a.createElement(p.a,{style:{alignItems:"center"}},S.a.createElement(p.a,{style:F.buttonCon},S.a.createElement(b.a,{onPress:this.onCreateButtonPress},S.a.createElement(p.a,{style:F.button},S.a.createElement(g.a,{style:F.buttonText},"Create")))),S.a.createElement(p.a,{style:F.buttonCon},S.a.createElement(b.a,{onPress:this.onCloseButtonPress},S.a.createElement(p.a,{style:F.button},S.a.createElement(g.a,{style:F.buttonText},"Close"))))))}}]),n}(k.Component),F=y.a.create({modalContainer:{justifyContent:"center",borderRadius:30,shadowRadius:10,width:U.width-80,height:280,borderWidth:2,borderColor:"#8ecfe8"},textInput:{height:40,borderBottomColor:"gray",marginLeft:30,marginRight:30,marginTop:20,marginBottom:10,borderBottomWidth:1},text:{fontSize:16,fontWeight:"bold",textAlign:"center",marginTop:40},button:{padding:8,marginTop:3,marginBottom:3,height:40,width:150,borderRadius:6,backgroundColor:"#8ecfe8",alignItems:"center"},buttonCon:{width:150},buttonText:{color:"white"}}),V=n(543);function H(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=h()(e);if(t){var o=h()(this).constructor;n=Reflect.construct(a,arguments,o)}else n=a.apply(this,arguments);return m()(this,n)}}var Q=function(e){u()(a,e);var t=H(a);function a(e){var n;return i()(this,a),(n=t.call(this,e)).state={messages:null,uid:""},n.createRoom=function(e){M.send([{name:e.name,roomCode:e.roomCode,uid:n.state.uid,accessLevel:e.accessLevel}])},n.onPressLogout=function(){M.auth.signOut(),n.props.navigation.navigate("Login")},n.onAddPress=function(){n.refs.addmodal.showAddModal()},n.onPressScan=function(){n.props.navigation.navigate("BarcodeScanner")},n.printMessages=function(){alert("Join")},n.onPressBack=function(){n.props.navigation.navigate("RoomList")},n}return c()(a,[{key:"componentDidMount",value:function(){var e=this;M.auth.onAuthStateChanged((function(t){t||e.props.navigation.navigate("Login")})),this.setState({uid:M.uid}),M.userRoomDb.once("value",(function(t){var n=t.toJSON(),a=[];for(var o in n)a.push(n[o]);e.setState({messages:a})}))}},{key:"render",value:function(){return S.a.createElement(p.a,{style:Y.container},S.a.createElement(p.a,{style:Y.headerRow},S.a.createElement(p.a,{style:Y.left},S.a.createElement(p.a,{style:{flexDirection:"row",alignItems:"center"}},S.a.createElement(b.a,{style:{marginRight:10},onPress:this.onPressBack},S.a.createElement(C.a,{style:Y.backIcon,source:n(134)})),S.a.createElement(g.a,{style:Y.backButtonText},"Joint To Room"))),S.a.createElement(p.a,{style:Y.right})),S.a.createElement(p.a,{style:Y.buttonCon},S.a.createElement(b.a,{onPress:this.printMessages},S.a.createElement(p.a,{style:Y.button},S.a.createElement(g.a,{style:Y.buttonText},"Join To Room"))),S.a.createElement(b.a,{onPress:this.onPressScan},S.a.createElement(p.a,{style:Y.button},S.a.createElement(g.a,{style:Y.buttonText},"Scan QR Code")))))}}]),a}(S.a.Component),Y=y.a.create({container:{width:"100%",paddingTop:"android"===w.a.OS?E.a.currentHeight:0},container2:{width:"100%"},scroll:{height:"83%"},addIcon:{height:40,width:40},headerRow:{flexDirection:"row",width:"100%",justifyContent:"center",paddingBottom:10,paddingTop:10,backgroundColor:"#8ecfe8"},right:{justifyContent:"center",width:"50%",alignItems:"flex-end",paddingRight:10},left:{justifyContent:"center",width:"50%",alignItems:"flex-start",paddingLeft:10},button:{padding:8,marginTop:3,marginBottom:3,height:40,width:150,borderRadius:6,backgroundColor:"#8ecfe8",alignItems:"center"},buttonCon:{width:150,flexDirection:"row"},buttonText:{color:"white"},TextContainer:{height:50,width:"98%",borderWidth:1,borderRadius:10,marginTop:1,marginBottom:1,marginLeft:3,marginRight:4,justifyContent:"center",paddingLeft:20,alignItems:"flex-start"},text:{fontFamily:"sans-serif",fontWeight:"bold",textShadowRadius:5},textCont:{alignItems:"flex-start"},backButtonText:{color:"white"}});function Z(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=h()(e);if(t){var o=h()(this).constructor;n=Reflect.construct(a,arguments,o)}else n=a.apply(this,arguments);return m()(this,n)}}var q=O.a.get("window"),K=function(e){u()(n,e);var t=Z(n);function n(e){var a;return i()(this,n),(a=t.call(this,e)).showJoinModal=function(){a.refs.myModal.open()},a.onCreateButtonPress=function(){0===a.state.newRoomName.length?alert("You must enter room code!"):(a.props.parentFlatList.JoinToRoom(a.state.newRoomName.toUpperCase()),a.refs.myModal.close())},a.onCloseButtonPress=function(){a.refs.myModal.close()},a.onTextChange=function(e){var t=e.toUpperCase();a.setState({newRoomName:""}),a.setState({newRoomName:t})},a.state={newRoomName:""},a}return c()(n,[{key:"render",value:function(){var e=this;return S.a.createElement(z.a,{style:X.modalContainer,position:"center",backdrop:!0,ref:"myModal"},S.a.createElement(g.a,{style:X.text},"Join To Room"),S.a.createElement(W.a,{style:X.textInput,placeholder:"Enter room code",value:this.state.newRoomName,onChangeText:function(t){e.setState({newRoomName:t})}}),S.a.createElement(p.a,{style:{alignItems:"center"}},S.a.createElement(p.a,{style:X.buttonCon},S.a.createElement(b.a,{onPress:this.onCreateButtonPress},S.a.createElement(p.a,{style:X.button},S.a.createElement(g.a,{style:X.buttonText},"Join")))),S.a.createElement(p.a,{style:X.buttonCon},S.a.createElement(b.a,{onPress:this.onCloseButtonPress},S.a.createElement(p.a,{style:X.button},S.a.createElement(g.a,{style:X.buttonText},"Close"))))))}}]),n}(k.Component),X=y.a.create({modalContainer:{justifyContent:"center",borderRadius:30,shadowRadius:10,width:q.width-80,height:280,borderWidth:2,borderColor:"#8ecfe8"},textInput:{height:40,borderBottomColor:"gray",marginLeft:30,marginRight:30,marginTop:20,marginBottom:10,borderBottomWidth:1},text:{fontSize:16,fontWeight:"bold",textAlign:"center",marginTop:40},button:{padding:8,marginTop:3,marginBottom:3,height:40,width:150,borderRadius:6,backgroundColor:"#8ecfe8",alignItems:"center"},buttonCon:{width:150},buttonText:{color:"white"}});function G(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=h()(e);if(t){var o=h()(this).constructor;n=Reflect.construct(a,arguments,o)}else n=a.apply(this,arguments);return m()(this,n)}}Object(V.a)();var $=function(e){u()(a,e);var t=G(a);function a(e){var n;return i()(this,a),(n=t.call(this,e)).state={messages:null,joinMessages:null,uid:""},n._menu=null,n.setMenuRef=function(e){n._menu=e},n.hideMenu=function(){n._menu.hide()},n.showMenu=function(){n._menu.show()},n.getUid=function(){return M.uid},n.createRoom=function(e){M.send([{name:e.name,roomCode:e.roomCode,uid:n.state.uid,accessLevel:e.accessLevel}])},n.getRoomNameByCode=function(e){for(var t in n.state.joinMessages)if(n.state.joinMessages[t].roomCode===e)return n.state.joinMessages[t].name},n.isUnique=function(e){var t=!1;return n.state.joinMessages.forEach((function(n){String(n.roomCode).valueOf()===String(e).valueOf()&&(t=!0)})),!t},n.JoinToRoom=function(e){void 0!==n.getRoomNameByCode(e)?(M.send([{name:n.getRoomNameByCode(e),roomCode:e,uid:n.state.uid,accessLevel:"Editor"}]),n.props.navigation.navigate("Main",{roomCode:{roomCode:e},roomName:n.getRoomNameByCode(e),uid:n.state.uid})):alert("There is no room with such a code!")},n.onCodePress=function(){n.refs.codemodal.showJoinModal()},n.printMessages=function(){console.log(n.isUnique("QJN0LC"))},n.onPressLogout=function(){M.auth.signOut(),n.props.navigation.navigate("Login")},n.onPressJoin=function(){n.props.navigation.navigate("CodeOrQR")},n.onAddPress=function(){n.refs.addmodal.showAddModal()},n.onPressScan=function(){n.props.navigation.navigate("BarcodeScanner")},n}return c()(a,[{key:"componentDidMount",value:function(){var e=this;M.auth.onAuthStateChanged((function(t){e.props.navigation.navigate(t?"RoomList":"Login")})),this.setState({uid:M.uid}),M.get((function(t){var n=M.uid;M.userRoomDb.once("value",(function(t){var a=t.toJSON(),o=[];for(var r in a)a[r].uid===n&&o.push(a[r]);e.setState({messages:o})})),M.userRoomDb.once("value",(function(t){var n=t.toJSON(),a=[];for(var o in n)a.push(n[o]);e.setState({joinMessages:a}),e.setState({uid:M.uid})}))}))}},{key:"render",value:function(){var e=this;return S.a.createElement(p.a,{style:{backgroundColor:"#8ecfe8"}},S.a.createElement(p.a,{style:[ee.container,{backgroundColor:"white",height:"100%"}]},S.a.createElement(p.a,{style:ee.headerRow},S.a.createElement(p.a,{style:ee.left},S.a.createElement(g.a,{style:ee.backButtonText},"Rooms")),S.a.createElement(p.a,{style:ee.right},S.a.createElement(b.a,{onPress:this.showMenu},S.a.createElement(C.a,{style:ee.addIcon,source:n(213)})),S.a.createElement(I.c,{ref:this.setMenuRef},S.a.createElement(I.b,{onPress:function(){e.hideMenu(),e.onAddPress()}},"Create Room"),S.a.createElement(I.b,{onPress:function(){e.hideMenu(),e.onCodePress()}},"Join Room With Code"),S.a.createElement(I.b,{onPress:function(){e.hideMenu(),e.onPressScan()}},"Scan QR Code"),S.a.createElement(I.a,null),S.a.createElement(I.b,{onPress:function(){e.hideMenu(),e.onPressLogout()}},"Logout")))),S.a.createElement(N.a,{style:ee.scroll},S.a.createElement(j.a,{style:ee.container2,data:void 0===this.state.messages?[{name:"Empty List"}]:this.state.messages,keyExtractor:function(e){return e.roomCode},renderItem:function(t){var n=t.item;return S.a.createElement(b.a,{onPress:function(){e.props.navigation.navigate("Main",{roomCode:n.roomCode,roomName:n.name,email:M.email})}},S.a.createElement(p.a,{style:ee.TextContainer},S.a.createElement((function(e){var t=e.title;return S.a.createElement(p.a,{style:ee.textCont},S.a.createElement(g.a,{style:ee.text},t))}),{title:n.name})))}})),S.a.createElement(_,{ref:"addmodal",parentFlatList:this}),S.a.createElement(K,{ref:"codemodal",parentFlatList:this})))}}]),a}(S.a.Component),ee=y.a.create({container:{width:"100%",marginTop:"android"===w.a.OS?E.a.currentHeight:0},container2:{width:"100%"},scroll:{height:"83%"},addIcon:{height:40,width:40},headerRow:{flexDirection:"row",width:"100%",justifyContent:"center",paddingBottom:10,paddingTop:10,backgroundColor:"#8ecfe8"},right:{justifyContent:"center",width:"50%",alignItems:"flex-end",paddingRight:10},left:{justifyContent:"center",width:"50%",alignItems:"flex-start",paddingLeft:10},button:{padding:8,marginTop:3,marginBottom:3,height:40,width:150,borderRadius:6,backgroundColor:"#8ecfe8",alignItems:"center"},buttonCon:{width:150,flexDirection:"row"},buttonText:{color:"white"},TextContainer:{height:50,width:"98%",borderWidth:1,borderRadius:10,marginTop:1,marginBottom:1,marginLeft:3,marginRight:4,justifyContent:"center",paddingLeft:20,alignItems:"flex-start"},text:{fontFamily:"sans-serif",fontWeight:"bold",textShadowRadius:5},textCont:{alignItems:"flex-start"},backButtonText:{color:"white"}}),te=(n(531),n(218)),ne=n.n(te);function ae(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=h()(e);if(t){var o=h()(this).constructor;n=Reflect.construct(a,arguments,o)}else n=a.apply(this,arguments);return m()(this,n)}}O.a.get("window");var oe=function(e){u()(n,e);var t=ae(n);function n(e){var a;return i()(this,n),(a=t.call(this,e)).showJoinModal=function(){a.refs.myModal.open()},a.onCloseButtonPress=function(){a.refs.myModal.close()},a.state={roomCode:"",roomName:""},a}return c()(n,[{key:"render",value:function(){return S.a.createElement(z.a,{style:re.modalContainer,position:"center",backdrop:!0,ref:"myModal"},S.a.createElement(g.a,{style:re.text},"Join to ",void 0===this.props.roomName?"No room":this.props.roomName),S.a.createElement(g.a,{style:re.text},"Code: ",void 0===this.props.roomCode?"No room":this.props.roomCode),S.a.createElement(p.a,{style:re.Qrcode},S.a.createElement(ne.a,{value:void 0===this.props.roomCode?"No room":this.props.roomCode,size:250,includeMargin:!0,level:"L"})))}}]),n}(k.Component),re=y.a.create({modalContainer:{justifyContent:"center",borderRadius:30,shadowRadius:10,width:300,height:350,borderWidth:2,borderColor:"#8ecfe8",padding:20},textInput:{height:40,borderBottomColor:"gray",marginLeft:30,marginRight:30,marginTop:20,marginBottom:10,borderBottomWidth:1},text:{fontSize:16,fontWeight:"bold",textAlign:"center"},button:{padding:8,marginTop:3,marginBottom:3,height:40,width:150,borderRadius:6,backgroundColor:"#8ecfe8",alignItems:"center"},buttonCon:{width:150},buttonText:{color:"white"},Qrcode:{padding:10,paddingTop:20,alignItems:"center"}});function ie(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=h()(e);if(t){var o=h()(this).constructor;n=Reflect.construct(a,arguments,o)}else n=a.apply(this,arguments);return m()(this,n)}}var se=function(e){u()(a,e);var t=ie(a);function a(e){var n;return i()(this,a),(n=t.call(this,e)).state={messages:null,uid:""},n.onPressBack=function(){n.props.navigation.navigate("RoomList")},n.onScanPress=function(){n.props.navigation.navigate("BarcodeScanner")},n.onListPress=function(){n.props.navigation.navigate("Main")},n.onJoinPress=function(){n.refs.joinmodal.showJoinModal()},n}return c()(a,[{key:"render",value:function(){return S.a.createElement(p.a,{style:[ce.container]},S.a.createElement(p.a,{style:[ce.headerRow]},S.a.createElement(p.a,{style:ce.left},S.a.createElement(p.a,{style:{flexDirection:"row",alignItems:"center"}},S.a.createElement(b.a,{style:{marginRight:10},onPress:this.onPressBack},S.a.createElement(C.a,{style:ce.backIcon,source:n(134)})),S.a.createElement(g.a,{style:ce.backButtonText},void 0===this.props.navigation.state.params?"No room":this.props.navigation.state.params.roomName))),S.a.createElement(p.a,{style:ce.right},S.a.createElement(b.a,{onPress:this.onJoinPress},S.a.createElement(C.a,{style:ce.addIcon,source:n(213)})))),S.a.createElement(p.a,{style:ce.buttonCon},S.a.createElement(b.a,{onPress:this.onJoinPress},S.a.createElement(p.a,{style:ce.button},S.a.createElement(g.a,{style:ce.buttonText},"Open Join Modal")))),S.a.createElement(p.a,{style:ce.buttonCon},S.a.createElement(b.a,{onPress:this.onScanPress},S.a.createElement(p.a,{style:ce.button},S.a.createElement(g.a,{style:ce.buttonText},"Scan QR Code")))),S.a.createElement(p.a,{style:ce.buttonCon},S.a.createElement(b.a,{onPress:this.onListPress},S.a.createElement(p.a,{style:ce.button},S.a.createElement(g.a,{style:ce.buttonText},"Main")))),S.a.createElement(oe,{ref:"joinmodal",roomCode:void 0===this.props.navigation.state.params?"No room":this.props.navigation.state.params.roomCode,roomName:void 0===this.props.navigation.state.params?"No room":this.props.navigation.state.params.roomName}))}}]),a}(S.a.Component),ce=y.a.create({container:{backgroundColor:"#8ecfe8",width:"100%",flex:1,marginTop:"android"===w.a.OS?E.a.currentHeight:0},container2:{width:"100%"},scroll:{height:"83%"},addIcon:{height:40,width:40},backIcon:{height:22.73,width:30},headerRow:{flexDirection:"row",width:"100%",justifyContent:"center",paddingBottom:10,paddingTop:10,backgroundColor:"#8ecfe8"},right:{justifyContent:"center",width:"50%",alignItems:"flex-end",paddingRight:10},left:{justifyContent:"center",width:"50%",alignItems:"flex-start",paddingLeft:10},button:{padding:8,marginTop:3,marginBottom:3,height:40,width:150,borderRadius:6,backgroundColor:"#8ecfe8",alignItems:"center"},buttonCon:{},buttonText:{color:"white"},backButton:{},backButtonText:{color:"white"}}),le=n(116);function ue(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=h()(e);if(t){var o=h()(this).constructor;n=Reflect.construct(a,arguments,o)}else n=a.apply(this,arguments);return m()(this,n)}}var de=function(e){u()(n,e);var t=ue(n);function n(){return i()(this,n),t.apply(this,arguments)}return c()(n,[{key:"componentDidMount",value:function(){var e=this;M.auth.onAuthStateChanged((function(t){e.props.navigation.navigate(t?"RoomList":"Login")}))}},{key:"render",value:function(){return S.a.createElement(p.a,{style:me.container},S.a.createElement(g.a,null,"Loading"),S.a.createElement(le.a,{size:"large"}))}}]),n}(S.a.Component),me=y.a.create({container:{flex:1,justifyContent:"center",alignItems:"center"}}),fe=n(542);function he(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=h()(e);if(t){var o=h()(this).constructor;n=Reflect.construct(a,arguments,o)}else n=a.apply(this,arguments);return m()(this,n)}}var ge=function(e){u()(a,e);var t=he(a);function a(){var e;i()(this,a);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(e=t.call.apply(t,[this].concat(o))).state={email:"",password:"",confirmPassword:"",errorMessage:null},e.handleSignUp=function(){e.state.password!==e.state.confirmPassword?e.setState({errorMessage:"The two passwords do not match!"}):M.auth.createUserWithEmailAndPassword(e.state.email,e.state.password).then((function(){return e.props.navigation.navigate("RoomList")})).catch((function(t){return e.setState({errorMessage:t.message})}))},e}return c()(a,[{key:"render",value:function(){var e=this;return S.a.createElement(p.a,{style:pe.androidSafeZone},S.a.createElement(p.a,{style:[pe.container50,pe.stickToBottom]},S.a.createElement(p.a,{style:pe.imageIconContainer},S.a.createElement(C.a,{style:pe.imageIcon,source:n(276)})),S.a.createElement(p.a,{style:pe.welcomeText},S.a.createElement(g.a,{style:pe.welcomeTextContent},"Register to Playlist App!")),S.a.createElement(p.a,{style:{justifyContent:"center",alignItems:"center"}},this.state.errorMessage&&S.a.createElement(g.a,{style:{color:"red"}},this.state.errorMessage))),S.a.createElement(p.a,{style:[pe.container50,pe.centerContent]},S.a.createElement(p.a,null,S.a.createElement(fe.a,{style:pe.textInput,label:"Email Address",onChangeText:function(t){return e.setState({email:t})},value:this.state.email}),S.a.createElement(fe.a,{style:pe.textInput,label:"Password",onChangeText:function(t){return e.setState({password:t})},value:this.state.password}),S.a.createElement(fe.a,{style:pe.textInput,label:"Confirm Password",onChangeText:function(t){return e.setState({confirmPassword:t})},value:this.state.confirmPassword})),S.a.createElement(b.a,{style:pe.appButtonContainer,onPress:this.handleSignUp},S.a.createElement(g.a,{style:pe.appButtonText},"Register")),S.a.createElement(p.a,{style:pe.centerContent2},S.a.createElement(g.a,{onPress:function(){return e.props.navigation.navigate("Login")}},"Already have an account? Login"))))}}]),a}(S.a.Component),pe=y.a.create({container:{flex:1,justifyContent:"center",alignItems:"center"},container60:{height:"60%"},container40:{height:"40%"},container50:{height:"50%"},imageIconContainer:{justifyContent:"center",alignItems:"center"},stickToBottom:{justifyContent:"flex-end"},centerContent:{justifyContent:"center"},centerContent2:{alignItems:"center",marginTop:10},imageIcon:{width:230,height:230},welcomeText:{justifyContent:"center",alignItems:"center"},welcomeTextContent:{fontSize:20},textInput:{height:45,paddingLeft:10,marginTop:10,marginRight:15,marginLeft:15,borderWidth:1,borderColor:"#3abeff",borderRadius:3,backgroundColor:"#BDF3FA"},androidSafeZone:{paddingTop:"android"===w.a.OS?E.a.height:0},appButtonContainer:{elevation:8,backgroundColor:"#3abeff",borderRadius:10,paddingVertical:10,paddingHorizontal:12,marginLeft:15,marginRight:15,marginTop:10},appButtonText:{fontSize:18,color:"#fff",fontWeight:"bold",alignSelf:"center",textTransform:"uppercase"}});function ye(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=h()(e);if(t){var o=h()(this).constructor;n=Reflect.construct(a,arguments,o)}else n=a.apply(this,arguments);return m()(this,n)}}var ve=function(e){u()(a,e);var t=ye(a);function a(){var e;i()(this,a);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(e=t.call.apply(t,[this].concat(o))).state={email:"",password:"",errorMessage:null},e.handleLogin=function(){var t=e.state,n=t.email,a=t.password;M.auth.signInWithEmailAndPassword(n,a).then((function(){e.props.navigation.navigate("RoomList")})).catch((function(t){return e.setState({errorMessage:t.message})}))},e}return c()(a,[{key:"render",value:function(){var e=this;return S.a.createElement(p.a,{style:be.androidSafeZone},S.a.createElement(p.a,{style:[be.container60,be.stickToBottom]},S.a.createElement(p.a,{style:be.imageIconContainer},S.a.createElement(C.a,{style:be.imageIcon,source:n(276)})),S.a.createElement(p.a,{style:be.welcomeText},S.a.createElement(g.a,{style:be.welcomeTextContent},"Welcome to Playlist App!")),S.a.createElement(p.a,{style:{justifyContent:"center",alignItems:"center"}},this.state.errorMessage&&S.a.createElement(g.a,{style:{color:"red"}},this.state.errorMessage))),S.a.createElement(p.a,{style:[be.container40,be.centerContent]},S.a.createElement(p.a,null,S.a.createElement(fe.a,{style:be.textInput,label:"Email Address",onChangeText:function(t){return e.setState({email:t})},value:this.state.email}),S.a.createElement(fe.a,{style:be.textInput,label:"Password",onChangeText:function(t){return e.setState({password:t})},value:this.state.password})),S.a.createElement(b.a,{style:be.appButtonContainer,onPress:this.handleLogin},S.a.createElement(g.a,{style:be.appButtonText},"Login")),S.a.createElement(p.a,{style:be.centerContent2},S.a.createElement(g.a,{onPress:function(){return e.props.navigation.navigate("SignUp")}},"Don't have an account? Sign Up"))))}}]),a}(S.a.Component),be=y.a.create({container:{flex:1,justifyContent:"center",alignItems:"center"},container60:{height:"60%"},container40:{height:"40%"},imageIconContainer:{justifyContent:"center",alignItems:"center"},stickToBottom:{justifyContent:"flex-end"},centerContent:{justifyContent:"center"},centerContent2:{alignItems:"center",marginTop:10},imageIcon:{width:230,height:230},welcomeText:{justifyContent:"center",alignItems:"center"},welcomeTextContent:{fontSize:20},textInput:{height:45,paddingLeft:10,marginTop:10,marginRight:15,marginLeft:15,borderWidth:1,borderColor:"#3abeff",borderRadius:3,backgroundColor:"#BDF3FA"},androidSafeZone:{paddingTop:"android"===w.a.OS?E.a.height:0},appButtonContainer:{elevation:8,backgroundColor:"#3abeff",borderRadius:10,paddingVertical:10,paddingHorizontal:12,marginLeft:15,marginRight:15,marginTop:10},appButtonText:{fontSize:18,color:"#fff",fontWeight:"bold",alignSelf:"center",textTransform:"uppercase"}}),Ce=n(11),we=n.n(Ce),Ee=n(320),Re=n.n(Ee),xe=n(22);function ke(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=h()(e);if(t){var o=h()(this).constructor;n=Reflect.construct(a,arguments,o)}else n=a.apply(this,arguments);return m()(this,n)}}var Se=O.a.get("window"),Pe=function(e){u()(n,e);var t=ke(n);function n(e){var a;return i()(this,n),(a=t.call(this,e)).showAddModal=function(){a.refs.myModal.open()},a.onCreateButtonPress=function(){if(0===a.state.newMusicName.length)alert("You must enter music name!");else if(0===a.state.newMusicLink.length)alert("You must provide a link to the music!");else{var e=a.state.newMusicLink.split("watch?v=");void 0===e[1]?alert("You must provide a CORRECT link to the music!"):(a.props.parentFlatList.onAddPress({link:e[1],title:a.state.newMusicName,order:""}),a.refs.myModal.close())}},a.onCloseButtonPress=function(){a.refs.myModal.close()},a.state={newMusicName:"",newMusicLink:""},a}return c()(n,[{key:"render",value:function(){var e=this;return S.a.createElement(z.a,{style:Me.modalContainer,position:"center",backdrop:!0,ref:"myModal",onClose:function(){alert("Modal Closed")}},S.a.createElement(g.a,{style:Me.text},"Add New Music"),S.a.createElement(W.a,{style:Me.textInput,placeholder:"Enter music name",value:this.state.newMusicName,onChangeText:function(t){return e.setState({newMusicName:t})}}),S.a.createElement(W.a,{style:Me.textInput2,placeholder:"Enter music link",value:this.state.newMusicLink,onChangeText:function(t){return e.setState({newMusicLink:t})}}),S.a.createElement(p.a,{style:{alignItems:"center"}},S.a.createElement(p.a,{style:Me.buttonCon},S.a.createElement(b.a,{onPress:this.onCreateButtonPress},S.a.createElement(p.a,{style:Me.button},S.a.createElement(g.a,{style:Me.buttonText},"Add"))))))}}]),n}(k.Component),Me=y.a.create({modalContainer:{justifyContent:"center",borderRadius:30,shadowRadius:10,width:Se.width-80,height:280,borderWidth:2,borderColor:"#8ecfe8"},textInput:{height:40,borderBottomColor:"gray",marginLeft:30,marginRight:30,marginTop:20,marginBottom:10,borderBottomWidth:1},textInput2:{height:40,borderBottomColor:"gray",marginLeft:30,marginRight:30,marginBottom:10,borderBottomWidth:1},text:{fontSize:16,fontWeight:"bold",textAlign:"center",marginTop:40},button:{padding:8,marginTop:3,marginBottom:3,height:40,width:150,borderRadius:6,backgroundColor:"#8ecfe8",alignItems:"center"},buttonCon:{width:150},buttonText:{color:"white"}}),Ie=n(230),Te=n(231);function Le(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=h()(e);if(t){var o=h()(this).constructor;n=Reflect.construct(a,arguments,o)}else n=a.apply(this,arguments);return m()(this,n)}}var Be=xe.default.block,Ae=xe.default.set,De=xe.default.onChange,je=xe.default.Clock,Ne=xe.default.Value,Oe=xe.default.startClock,We=xe.default.stopClock,ze=xe.default.clockRunning,Je=xe.default.cond,Ue=xe.default.spring,_e=(xe.default.call,function(e){var t=e.item,n=e.drag,a=e.isActive,o=e.scale;return S.a.createElement(xe.default.View,{style:{flex:1,paddingHorizontal:10,alignItems:"center",flexDirection:"row",elevation:a?10:0,shadowRadius:a?10:0,shadowColor:a?"black":"transparent",shadowOpacity:a?.25:0,transform:[{scaleX:o},{scaleY:o}],backgroundColor:t.playing?"black":9999===t.order?"#f25a49":"lightgray",justifyContent:"center"}},9999!==t.order?S.a.createElement(p.a,{style:{width:"95%",borderBottomWidth:.4,borderColor:"#000000"}},S.a.createElement(b.a,{style:Ve.rowItem,onLongPress:n},S.a.createElement(g.a,{style:Ve.text},t.label))):S.a.createElement(p.a,{style:Ve.rowItemDelete},S.a.createElement(g.a,{style:Ve.textDelete},t.label)))}),Fe=function(e){u()(a,e);var t=Le(a);function a(e){var n;return i()(this,a),(n=t.call(this,e)).state={data:[],height:60+100*Math.random(),width:40+40*Math.random(),messages:null,uid:"",plusz:{key:"DeleteLink",label:"Delete",height:60+100*Math.random(),width:40+40*Math.random(),order:9999},testData:{key:"TestAddLink",label:"TestAdd",height:60+100*Math.random(),width:40+40*Math.random(),order:null},isPlaying:!1,source:0,linkList:null},n.onPressBack=function(){n.props.navigation.navigate("RoomList")},n.onJoinPress=function(){n.refs.joinModal.showJoinModal()},n.onAddModalPress=function(){n.refs.addMusicModal.showAddModal()},n.onAddPress=function(e){var t=[],a=0;for(var o in n.state.data)9999!==n.state.data[o].order&&(t.push(n.state.data[o]),a=n.state.data[o].order);var r={key:e.link,label:e.title,height:60+100*Math.random(),width:40+40*Math.random(),order:null};r.order=a+1,t.push(r),n.setState({data:t});var i=void 0===n.props.navigation.state.params.roomCode.data?n.props.navigation.state.params.roomCode:n.props.navigation.state.params.roomCode.data;M.sendUpdateList(t,i),t=n.addDeleteItem(t),n.setState({data:t})},n.removeDeleteItem=function(e){var t=[];for(var n in e)9999!==e[n].order&&t.push(e[n]);return t},n.addDeleteItem=function(e){var t=[];for(var a in e)t.push(e[a]);return t.push(n.state.plusz),t},n.checkDeleteItem=function(e){return 9999!==e[e.length-1].order},n.addMusicToList=function(e){if(n.checkDeleteItem(e))e.pop(),e.pop();else{e.pop();var t=[],a=!1,o=0;for(var r in n.state.data)t.push(n.state.data[r].order);for(var i in e)e[i].order!==t[i]?a?(e[i].order=o+1,o+=1):(a=!0,e[i].order=o+1,o+=1):a?(e[i].order=o+1,o+=1):o=t[i];n.setState({data:e}),n.setState({messages:e})}var s=void 0===n.props.navigation.state.params.roomCode.data?n.props.navigation.state.params.roomCode:n.props.navigation.state.params.roomCode.data;M.sendUpdateList(e,s);var c=e.length>0?n.addDeleteItem(e):e;n.setState({data:c}),n.setState({messages:c})},n.renderItem=function(e){var t=e.item,a=e.drag,o=e.isActive;return t.order===n.state.source-1?t.playing=!0:t.playing=!1,S.a.createElement(_e,{item:t,drag:a,isActive:o,scale:o?n.animState.position:1})},n.onPressDelete=function(){console.log(n.state.data)},n.onLogPress=function(){console.log(n.state.data)},n.onChatPress=function(){n.props.navigation.navigate("Chat",{roomCode:n.props.navigation.state.params.roomCode,roomName:n.props.navigation.state.params.roomName,email:M.email})},n.isActive=new xe.default.Value(0),n.clock=new je,n.animConfig={damping:20,mass:.4,stiffness:100,overshootClamping:!1,restSpeedThreshold:.2,restDisplacementThreshold:.2,toValue:new Ne(0)},n.animState={finished:new Ne(0),velocity:new Ne(0),position:new Ne(1),time:new Ne(0)},n._menu=null,n.setMenuRef=function(e){n._menu=e},n.hideMenu=function(){n._menu.hide()},n.showMenu=function(){n._menu.show()},n._onPlaybackStatusUpdate=function(e){return o.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.didJustFinish)try{n.generateLink(n.state.linkList[n.state.source]).then((function(e){n.soundObject.unloadAsync(),n.soundObject.loadAsync({uri:e.toString()}).then((function(){n.soundObject.playAsync(),n.setState({source:n.state.source+1})}))}))}catch(a){console.log("ERROR Loading Audio",a)}case 1:case"end":return t.stop()}}),null,null,null,Promise)},n.initAudio=function(){n.soundObject=new Ie.a.Sound,n.soundObject.setOnPlaybackStatusUpdate(n._onPlaybackStatusUpdate)},n.playMusic=function(){try{n.generateLink(n.state.linkList[n.state.source]).then((function(e){n.soundObject.unloadAsync(),n.soundObject.loadAsync({uri:e.toString()}).then((function(){n.soundObject.playAsync(),n.setState({source:n.state.source+1})}))}))}catch(e){console.log("ERROR Loading Audio",e)}},n.reStart=function(){n.setState({source:0})},n.prevMusic=function(){n.soundObject.stopAsync();try{n.generateLink(n.state.linkList[n.state.source-2<0?0:n.state.source-2]).then((function(e){n.soundObject.unloadAsync(),n.soundObject.loadAsync({uri:e.toString()}).then((function(){n.soundObject.playAsync(),n.setState({source:1+(n.state.source-2<0?0:n.state.source-2)})}))}))}catch(e){console.log("ERROR Loading Audio",e)}},n.nextMusic=function(){n.soundObject.stopAsync(),n.playMusic()},n.generateLink=function(e){var t,n;return o.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,o.a.awrap(Te.a.getInfo(e));case 2:return t=a.sent,n=Te.a.chooseFormat(t.formats,{quality:"140"}),a.abrupt("return",n.url);case 5:case"end":return a.stop()}}),null,null,null,Promise)},n.currentMusic=function(){if(0!==n.state.source)return S.a.createElement(p.a,{style:{backgroundColor:"#6bc5e8",height:30,justifyContent:"center",alignItems:"center"}},S.a.createElement(g.a,{style:{color:"white"}},"Playing: ",n.state.data[n.state.source-1].label))},n.loadAudio=n.loadAudio.bind(we()(n)),n.toggleAudioPlayback=n.toggleAudioPlayback.bind(we()(n)),n}return c()(a,[{key:"componentDidMount",value:function(){var e,t=this;return o.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:this.initAudio(),e=void 0===this.props.navigation.state.params.roomCode.data?this.props.navigation.state.params.roomCode:this.props.navigation.state.params.roomCode.data,console.log(e),M.getList((function(e){M.databaseAlone.ref("playlist/"+(void 0===t.props.navigation.state.params.roomCode.data?t.props.navigation.state.params.roomCode:t.props.navigation.state.params.roomCode.data)).once("value",(function(e){var n=e.toJSON(),a=[];for(var o in n){var r=n[o];r.key=n[o].link,r.label=n[o].title,r.height=60+100*Math.random(),r.width=40+40*Math.random(),r.order=n[o].order,a.push(r)}a.sort((function(e,t){return e.order-t.order}));var i=[];for(var s in a)i.push(a[s].key);t.setState({linkList:i});var c=t.addDeleteItem(a);t.setState({messages:c}),t.setState({data:c}),console.log("Updated")}))}),e);case 4:case"end":return n.stop()}}),null,this,null,Promise)}},{key:"componentWillUnmount",value:function(){this.soundObject.stopAsync()}},{key:"loadAudio",value:function(){var e=this;return o.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:this.soundObject=new Ie.a.Sound,this.soundObject.setOnPlaybackStatusUpdate(this._onPlaybackStatusUpdate);try{this.generateLink(this.state.linkList[this.state.source]).then((function(t){e.soundObject.loadAsync({uri:"https://cors-anywhere.herokuapp.com/"+t.toString()}),e.setState({source:e.state.source+1})}))}catch(n){console.log("ERROR Loading Audio",n)}case 3:case"end":return t.stop()}}),null,this,null,Promise)}},{key:"toggleAudioPlayback",value:function(){var e=this;this.setState({isPlaying:!this.state.isPlaying},(function(){if(e.state.isPlaying)try{e.generateLink(e.state.linkList[e.state.source]).then((function(t){e.soundObject.unloadAsync(),e.soundObject.loadAsync({uri:t.toString()}).then((function(){e.soundObject.playAsync(),e.setState({source:e.state.source+1})}))}))}catch(t){console.log("ERROR Loading Audio",t)}else e.soundObject.stopAsync()}))}},{key:"render",value:function(){var e=this;return S.a.createElement(p.a,{style:Ve.container},S.a.createElement(p.a,{style:Ve.headerRow},S.a.createElement(p.a,{style:Ve.left},S.a.createElement(p.a,{style:{flexDirection:"row",alignItems:"center"}},S.a.createElement(b.a,{style:{marginRight:10},onPress:this.onPressBack},S.a.createElement(C.a,{style:Ve.backIcon,source:n(134)})),S.a.createElement(g.a,{style:Ve.backButtonText},void 0===this.props.navigation.state.params?"No room":this.props.navigation.state.params.roomName))),S.a.createElement(p.a,{style:Ve.right},S.a.createElement(b.a,{style:{marginRight:10},onPress:this.showMenu},S.a.createElement(C.a,{style:Ve.addIcon,source:n(213)})),S.a.createElement(I.c,{ref:this.setMenuRef},S.a.createElement(I.b,{onPress:function(){e.hideMenu(),e.onJoinPress()}},"Share Room"),S.a.createElement(I.b,{onPress:function(){e.hideMenu(),e.onAddModalPress()}},"Add Music"),S.a.createElement(I.b,{onPress:function(){e.hideMenu(),e.onChatPress()}},"Chat"),S.a.createElement(I.b,{onPress:this.hideMenu},"Logout")))),S.a.createElement(Re.a,{style:{backgroundColor:"white"},data:this.state.data,renderItem:this.renderItem,onDragBegin:function(){return e.isActive.setValue(1)},onRelease:function(){return e.isActive.setValue(0)},keyExtractor:function(e,t){return"draggable-item-"+e.key},onDragEnd:function(t){var n=t.data;e.addMusicToList(n),console.log(e.state.data)}}),S.a.createElement(xe.default.Code,null,(function(){return Be([De(e.isActive,[Ae(e.animConfig.toValue,Je(e.isActive,1.5,1)),Oe(e.clock)]),Je(ze(e.clock),[Ue(e.clock,e.animState,e.animConfig),Je(e.animState.finished,[We(e.clock),Ae(e.animState.finished,0),Ae(e.animState.time,0),Ae(e.animState.velocity,0)])])])})),S.a.createElement(oe,{ref:"joinModal",roomCode:void 0===this.props.navigation.state.params?"No room":this.props.navigation.state.params.roomCode,roomName:void 0===this.props.navigation.state.params?"No room":this.props.navigation.state.params.roomName}),S.a.createElement(Pe,{ref:"addMusicModal",parentFlatList:this}),this.currentMusic(),S.a.createElement(p.a,{style:{flexDirection:"row",height:40}},S.a.createElement(b.a,{onPress:this.reStart,style:{height:40,width:"25%",backgroundColor:"#8ecfe8",justifyContent:"center",alignItems:"center"}},S.a.createElement(C.a,{style:{height:20,width:20},source:n(507)})),S.a.createElement(b.a,{onPress:this.prevMusic,style:{height:40,width:"25%",backgroundColor:"#8ecfe8",justifyContent:"center",alignItems:"center"}},S.a.createElement(C.a,{style:{height:20,width:35.5},source:n(508)})),S.a.createElement(b.a,{onPress:this.toggleAudioPlayback,style:{height:40,width:"25%",backgroundColor:"#8ecfe8",justifyContent:"center",alignItems:"center"}},S.a.createElement(C.a,{style:{height:20,width:17.775},source:n(509)})),S.a.createElement(b.a,{onPress:this.nextMusic,style:{height:40,width:"25%",backgroundColor:"#8ecfe8",justifyContent:"center",alignItems:"center"}},S.a.createElement(C.a,{style:{height:20,width:35.5},source:n(510)}))))}}]),a}(k.Component),Ve=y.a.create({audiobutton:{width:"25%"},container:{flex:1,width:"100%",backgroundColor:"#8ecfe8",paddingTop:"android"===w.a.OS?E.a.currentHeight:0},modalPos:{justifyContent:"flex-end",alignItems:"flex-end"},altMenuBox:{height:30},rowItem:{height:50,width:"100%"},rowItemDelete:{height:20,width:"100%"},text:{color:"black",fontSize:20,flex:1,textAlign:"center",textAlignVertical:"center"},textDelete:{color:"black",fontSize:10,flex:1,textAlign:"center",textAlignVertical:"center"},rightHand:{alignItems:"flex-start"},container2:{width:"100%"},scroll:{height:"83%"},addIcon:{height:40,width:40},backIcon:{height:22.73,width:30},headerRow:{flexDirection:"row",width:"100%",justifyContent:"center",paddingBottom:10,paddingTop:10,backgroundColor:"#8ecfe8"},right:{justifyContent:"center",width:"50%",alignItems:"flex-end",paddingRight:10},left:{justifyContent:"center",width:"50%",alignItems:"flex-start",paddingLeft:10},button:{padding:8,marginTop:3,marginBottom:3,height:40,width:150,borderRadius:6,backgroundColor:"#8ecfe8",alignItems:"center"},buttonCon:{},buttonText:{color:"white"},backButton:{},backButtonText:{color:"white"},headerText:{fontSize:20,margin:10,fontWeight:"bold"},menuContent:{color:"#000",fontWeight:"bold",padding:2,fontSize:20}}),He=n(117),Qe=n(104),Ye=new(function(){function e(){var t=this;i()(this,e),this.state={data:null,allMessage:[]},this.init=function(){P.apps.length||P.initializeApp({apiKey:"AIzaSyCmX4C7tBPwZQDh8l734MBtUDKWOdEiO18",authDomain:"playlistapp-f6363.firebaseapp.com",databaseURL:"https://playlistapp-f6363-default-rtdb.firebaseio.com",projectId:"playlistapp-f6363",storageBucket:"playlistapp-f6363.appspot.com",messagingSenderId:"427902199737",appId:"1:427902199737:web:52985fe337d03caa2af868"})},this.checkAuth=function(){P.auth().onAuthStateChanged((function(e){e||console.log("No user")}))},this.send=function(e){e.forEach((function(e){var t={text:e.text,timestamp:P.database.ServerValue.TIMESTAMP,user:e.user};P.database().ref("chat/"+e.user.roomCode).push(t)}))},this.parse=function(e){var t=e.val(),n=t.user,a=t.text,o=t.timestamp;return{_id:e.key,createdAt:new Date(o),text:a,user:n}},this.get=function(e,n){P.database().ref("chat/"+n).on("child_added",(function(n){return e(t.parse(n))}))},this.off=function(e){P.database().ref("chat/"+e).off()},this.init()}return c()(e,[{key:"db",get:function(){return P.database()}},{key:"uid",get:function(){return(P.auth().currentUser||{}).uid}},{key:"auth",get:function(){return P.auth()}}]),e}()),Ze=n(229);function qe(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=h()(e);if(t){var o=h()(this).constructor;n=Reflect.construct(a,arguments,o)}else n=a.apply(this,arguments);return m()(this,n)}}var Ke=function(e){u()(a,e);var t=qe(a);function a(){var e;i()(this,a);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(e=t.call.apply(t,[this].concat(o))).state={messages:[]},e.onPressBack=function(){e.props.navigation.navigate("Main",{roomCode:e.props.navigation.state.params.roomCode,roomName:e.props.navigation.state.params.roomName,email:M.email})},e}return c()(a,[{key:"user",get:function(){return{_id:Ye.uid,name:this.props.navigation.state.params.email,roomCode:this.roomCode}}},{key:"roomCode",get:function(){return void 0===this.props.navigation.state.params.roomCode.data?this.props.navigation.state.params.roomCode:this.props.navigation.state.params.roomCode.data}},{key:"componentDidMount",value:function(){var e=this,t=this.roomCode;Ye.get((function(t){e.setState((function(e){return{messages:Ze.a.append(e.messages,t)}}))}),t)}},{key:"componentWillUnmount",value:function(){Ye.off(this.roomCode)}},{key:"render",value:function(){var e=S.a.createElement(Ze.a,{messages:this.state.messages,onSend:Ye.send,user:this.user});return"android"===w.a.OS?S.a.createElement(p.a,{style:{backgroundColor:"#8ecfe8",paddingTop:"android"===w.a.OS?E.a.currentHeight:0}},S.a.createElement(p.a,{style:Xe.headerRow},S.a.createElement(p.a,{style:Xe.left},S.a.createElement(p.a,{style:{flexDirection:"row",alignItems:"center"}},S.a.createElement(b.a,{style:{marginRight:10},onPress:this.onPressBack},S.a.createElement(C.a,{style:Xe.backIcon,source:n(134)})),S.a.createElement(g.a,{style:Xe.backButtonText},void 0===this.props.navigation.state.params?"No room":this.props.navigation.state.params.roomName," Chat"))),S.a.createElement(p.a,{style:Xe.right})),S.a.createElement(He.a,{style:{height:"93%"},behavior:"height",keyboardVerticalOffset:30,enabled:!0},e)):S.a.createElement(Qe.a,{style:{flex:1}},e)}}]),a}(S.a.Component),Xe=y.a.create({audiobutton:{width:"25%"},container:{flex:1,width:"100%",backgroundColor:"#8ecfe8",paddingTop:"android"===w.a.OS?E.a.currentHeight:0},modalPos:{justifyContent:"flex-end",alignItems:"flex-end"},altMenuBox:{height:30},rowItem:{height:50,width:"100%"},text:{fontWeight:"bold",color:"white",fontSize:20,flex:1,textAlign:"center",textAlignVertical:"center"},rightHand:{alignItems:"flex-start"},container2:{width:"100%"},scroll:{height:"83%"},addIcon:{height:40,width:40},backIcon:{height:22.73,width:30},headerRow:{flexDirection:"row",width:"100%",justifyContent:"center",paddingBottom:10,paddingTop:10,backgroundColor:"#8ecfe8"},right:{justifyContent:"center",width:"50%",alignItems:"flex-end",paddingRight:10},left:{justifyContent:"center",width:"50%",alignItems:"flex-start",paddingLeft:10},button:{padding:8,marginTop:3,marginBottom:3,height:40,width:150,borderRadius:6,backgroundColor:"#8ecfe8",alignItems:"center"},buttonCon:{},buttonText:{color:"white"},backButton:{},backButtonText:{color:"white"},headerText:{fontSize:20,margin:10,fontWeight:"bold"},menuContent:{color:"#000",fontWeight:"bold",padding:2,fontSize:20}}),Ge=n(228),$e=Object(Ge.createSwitchNavigator)({Loading:de,Login:ve,SignUp:ge,Main:Fe,RoomList:$,PlayList:se,BarcodeScanner:L,CodeOrQR:Q,TestScreen:D,Chat:Ke},{initialRouteName:"Loading"}),et=Object(Ge.createAppContainer)($e);t.a=et},341:function(e,t,n){e.exports=n(529)},507:function(e,t,n){e.exports=n.p+"static/media/reset.de29daa2.png"},508:function(e,t,n){e.exports=n.p+"static/media/prev.6499ff95.png"},509:function(e,t,n){e.exports=n.p+"static/media/play.a233062e.png"},510:function(e,t,n){e.exports=n.p+"static/media/next.d3c60883.png"}},[[341,1,2]]]);
//# sourceMappingURL=app.467b079b.chunk.js.map